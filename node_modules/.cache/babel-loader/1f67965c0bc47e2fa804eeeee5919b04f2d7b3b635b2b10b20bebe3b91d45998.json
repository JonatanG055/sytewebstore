{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import Sidebar from'./components/Sidebar';import ProductList from'./components/ProductList';import Section from'./components/Section';import RegisterButton from'./components/RegisterButton';import RegisterPage from'./components/RegisterPage';import LoginButton from'./components/LoginButton';import LoginPage from'./components/LoginPage';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[productos,setProductos]=useState([]);const[categorias,setCategorias]=useState([]);const[error,setError]=useState(null);const[currentSection,setCurrentSection]=useState('home');const[categoriaSeleccionada,setCategoriaSeleccionada]=useState(null);const[showRegisterForm,setShowRegisterForm]=useState(false);const[showLoginForm,setShowLoginForm]=useState(false);const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);// URL base dinámica para el backend\nconst baseUrl=process.env.REACT_APP_API_BASE_URL;useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));setIsAuthenticated(true);}fetch(`${baseUrl}/api/products`).then(response=>response.json()).then(data=>setProductos(data)).catch(error=>setError(error.message));fetch(`${baseUrl}/api/products/categories`).then(response=>response.json()).then(data=>setCategorias(data)).catch(error=>setError(error.message));},[baseUrl]);const productosFiltrados=categoriaSeleccionada?productos.filter(producto=>producto.categoriaID===categoriaSeleccionada):productos;const navigateToSection=section=>{setCurrentSection(section);};const handleShowRegisterForm=()=>{setShowRegisterForm(true);};const handleCloseRegisterForm=()=>{setShowRegisterForm(false);};const handleShowLoginForm=()=>{setShowLoginForm(true);};const handleCloseLoginForm=()=>{setShowLoginForm(false);};const handleLogout=()=>{localStorage.removeItem('user');setUser(null);setIsAuthenticated(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[!isAuthenticated&&/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(RegisterButton,{onClick:handleShowRegisterForm}),/*#__PURE__*/_jsx(LoginButton,{onClick:handleShowLoginForm})]}),/*#__PURE__*/_jsx(Sidebar,{currentSection:currentSection,navigateToSection:navigateToSection,setCategoriaSeleccionada:setCategoriaSeleccionada,categorias:categorias}),/*#__PURE__*/_jsxs(\"main\",{className:\"content\",children:[isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Bienvenido, \",user.nombre]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Cerrar sesi\\xF3n\"})]}):null,showRegisterForm&&!isAuthenticated&&/*#__PURE__*/_jsx(RegisterPage,{onClose:handleCloseRegisterForm,setIsAuthenticated:setIsAuthenticated,setUser:setUser}),showLoginForm&&!isAuthenticated&&/*#__PURE__*/_jsx(LoginPage,{onClose:handleCloseLoginForm,setIsAuthenticated:setIsAuthenticated,setUser:setUser}),!showRegisterForm&&!showLoginForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Section,{section:currentSection,setCategoriaSeleccionada:setCategoriaSeleccionada,categorias:categorias}),/*#__PURE__*/_jsx(ProductList,{productos:productosFiltrados,categorias:categorias,error:error})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","ProductList","Section","RegisterButton","RegisterPage","LoginButton","LoginPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","productos","setProductos","categorias","setCategorias","error","setError","currentSection","setCurrentSection","categoriaSeleccionada","setCategoriaSeleccionada","showRegisterForm","setShowRegisterForm","showLoginForm","setShowLoginForm","isAuthenticated","setIsAuthenticated","user","setUser","baseUrl","process","env","REACT_APP_API_BASE_URL","storedUser","localStorage","getItem","JSON","parse","fetch","then","response","json","data","catch","message","productosFiltrados","filter","producto","categoriaID","navigateToSection","section","handleShowRegisterForm","handleCloseRegisterForm","handleShowLoginForm","handleCloseLoginForm","handleLogout","removeItem","className","children","onClick","nombre","onClose"],"sources":["/home/ely/sytewebstore/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Sidebar from './components/Sidebar';\nimport ProductList from './components/ProductList';\nimport Section from './components/Section';\nimport RegisterButton from './components/RegisterButton';\nimport RegisterPage from './components/RegisterPage';\nimport LoginButton from './components/LoginButton';\nimport LoginPage from './components/LoginPage';\n\nfunction App() {\n  const [productos, setProductos] = useState([]);\n  const [categorias, setCategorias] = useState([]);\n  const [error, setError] = useState(null);\n  const [currentSection, setCurrentSection] = useState('home');\n  const [categoriaSeleccionada, setCategoriaSeleccionada] = useState(null);\n  const [showRegisterForm, setShowRegisterForm] = useState(false);\n  const [showLoginForm, setShowLoginForm] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n\n  // URL base dinámica para el backend\n  const baseUrl = process.env.REACT_APP_API_BASE_URL;\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n      setIsAuthenticated(true);\n    }\n\n    fetch(`${baseUrl}/api/products`)\n      .then((response) => response.json())\n      .then((data) => setProductos(data))\n      .catch((error) => setError(error.message));\n\n    fetch(`${baseUrl}/api/products/categories`)\n      .then((response) => response.json())\n      .then((data) => setCategorias(data))\n      .catch((error) => setError(error.message));\n  }, [baseUrl]);\n\n  const productosFiltrados = categoriaSeleccionada\n    ? productos.filter((producto) => producto.categoriaID === categoriaSeleccionada)\n    : productos;\n\n  const navigateToSection = (section) => {\n    setCurrentSection(section);\n  };\n\n  const handleShowRegisterForm = () => {\n    setShowRegisterForm(true);\n  };\n\n  const handleCloseRegisterForm = () => {\n    setShowRegisterForm(false);\n  };\n\n  const handleShowLoginForm = () => {\n    setShowLoginForm(true);\n  };\n\n  const handleCloseLoginForm = () => {\n    setShowLoginForm(false);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('user');\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n\n  return (\n    <div className=\"App\">\n      {!isAuthenticated && (\n        <div className=\"button-container\">\n          <RegisterButton onClick={handleShowRegisterForm} />\n          <LoginButton onClick={handleShowLoginForm} />\n        </div>\n      )}\n\n      <Sidebar\n        currentSection={currentSection}\n        navigateToSection={navigateToSection}\n        setCategoriaSeleccionada={setCategoriaSeleccionada}\n        categorias={categorias}\n      />\n\n      <main className=\"content\">\n        {isAuthenticated ? (\n          <div>\n            <p>Bienvenido, {user.nombre}</p>\n            <button onClick={handleLogout}>Cerrar sesión</button>\n          </div>\n        ) : null}\n\n        {showRegisterForm && !isAuthenticated && (\n          <RegisterPage onClose={handleCloseRegisterForm} setIsAuthenticated={setIsAuthenticated} setUser={setUser} />\n        )}\n\n        {showLoginForm && !isAuthenticated && (\n          <LoginPage onClose={handleCloseLoginForm} setIsAuthenticated={setIsAuthenticated} setUser={setUser} />\n        )}\n\n        {!showRegisterForm && !showLoginForm && (\n          <>\n            <Section section={currentSection} setCategoriaSeleccionada={setCategoriaSeleccionada} categorias={categorias} />\n            <ProductList productos={productosFiltrados} categorias={categorias} error={error} />\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}